# Компоненты
Библиотека компонентов для переиспользования в проектах Nordclan

## Требования

1. `node.js` версии `6` или выше
1. `npm` версии `4.5` или выше

## Установка, настройка и сборка

### Установка

```bash
$ npm i
```

Эта команда устанавливает все необходимые пакеты для разработки и сборки

### Сборка для разработки

```bash
$ npm run storybook
```

Сценарий `storybook` запускает среду разработки. Результат можно увидеть в браузере по адресу `http://localhost:6006/`.

### Сборка для эксплуатации

```bash
$ npm run build
```

Сценарий `build` перед началом сборки выполняет очистку папки `dist` в корне проекта от файлов предыдущей сборки, создает файлы новой сборки в папке `dist`.

## Публикация

1. Сконфигурировать npm для использования группового репозитория:
	 `npm config set registry http://sd-npm.naumen.ru/repository/npm-group/`
	 (`npm-group` - объединяет `npm-private` репозиторий и `npm-registry` - proxy репозиторий, указывающий на http://registry.npmjs.org/)

2. Аутентифицироваться:
	 `npm login --registry=http://sd-npm.naumen.ru/repository/npm-group/`
	 (Ввести реквизиты учетной записи ldap)

3. Попросить ТПиВИ предоставить доступ для возможности публикации приложений

4. Публикация пакета:
	 `npm publish --registry http://sd-npm.naumen.ru/repository/npm-private/`

## Прочие сценарии

Помимо сценариев `storybook` и `build` существуют еще сценарии `flow`, `lint`, `test` и `test:watch`.

`flow` запускает статическую проверку типов. `lint` проверяет код на соответствие стилю написания кода. `test` запускает тесты, а `test:watch` запускает тесты в режиме наблюдения: при изменении файлов тесты будут перезапускаться.

## Тестирование

При написании тестов `flow` может работать некорректно. Чтобы это исправить, необходимо выполнить команду:

```bash
$ flow-typed install jest@версия-jest-указанная-в-package.json
```

## Совместимость

Система сборки (`webpack@4`) и утилита преобразования `ES6` (`babel`) в `JavaScript` не подразумевают работу результата в `Internet Explorer 8`.
