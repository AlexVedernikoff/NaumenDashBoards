# Встроенное приложение "Геолокация"
Встроенное приложение для отслеживание текущего местоположения.

Приложение представляет собой карту с основными возможностями навигации и масштабирования, на которой установлены метки подвижных и неподвижных точек.

**Неподвижная точка** - объект на карте, координаты которого не изменяются с течением времени.  
**Подвижная точка** - объект на карте, координаты которого изменяются с течением времени.

## Release Notes

### 1.0.0

Основные возможности:

* Отображение на карте меток неподвижных точек.
  * Например, адрес контрагента заявки, расположение ИТ-актива. 
  * В том числе отображение нескольких объектов с координатами в одной точке (например, несколько заявок одного контрагента)
* Отображение на карте меток подвижных точек. 
  * Метка показывает последнее известное местоположение сотрудника по данным геолокации мобильного  устройства.
* Автоматическое обновление координат подвижных точек на карте.
* Обновление координат подвижных точек или списка меток на карте по кнопке.
* Отображение попапа с информацией о метке и ссылкой для перехода на карточку объекта.
* Возможности настройки:
  * настройки можно указывать в свойствах контента;
  * для каждого контента можно задать свое правило получения списка меток для отображения на карте;
  * настройка карточки - какую информацию о метке показывать;
  * настройка цветов для иконок меток;
  * вкл/откл автоматического обновления координат подвижных точек;
  * вкл/откл использования механизма запроса местоположения через push.

Приложение работает на версии SMP 4.11.  
В последних версиях браузеров Chrome, Edge, IE11, Firefox, Safari.

## Требования

1. `node.js` версии `6` или выше
1. `npm` версии `4.5` или выше

## Установка, настройка и сборка

### Установка

```bash
$ npm i
```

Эта команда устанавливает все необходимые пакеты для разработки и сборки встраиваемого приложения.

### Настройка

Необходимо отредактировать файлы `readme.md` и `package.json`, которые находятся в корневой папке разрабатываемого приложения:

- в `readme.md` поместить описание создаваемого приложения, особенности его сборки, настройки и использования;
- в `package.json` нужно отредактировать поля `author`, `bugs`, `description`, `homepage`, `keywords`, `name` и `version` так, чтобы они содержали актуальные значения.

### Сборка для разработки

```bash
$ npm run dev
```

Сценарий `dev` собирает модули в итоговую сборку и держит ее в памяти. Результат можно увидеть в браузере по адресу `http://ваш-ip-адрес:8080`. При изменении каких либо исходных файлов (кроме конфигурационных), запустится процесс пересборки и после его окончания страница в браузере обновится.

### Сборка для эксплуатации

```bash
$ npm run build
```

Сценарий `build` перед началом сборки выполняет очистку папки `dist` в корне проекта от файлов предыдущей сборки, создает файлы новой сборки в папке `dist`, а после окончания сборки создает архив `dist-DD-MM-YYYY HH-mm-SS.zip` из файлов в папке `dist`, где `DD-MM-YYYY` - дата в формате `день-месяц-год`, а `HH-mm-SS` - время в формате `часы-минуты-секунды`. 

## Прочие сценарии

Помимо сценариев `dev` и `build` существуют еще сценарии `flow`, `lint`, `test` и `test:watch`.

`flow` запускает статическую проверку типов. `lint` проверяет код на соответствие стилю написания кода. `test` запускает тесты, а `test:watch` запускает тесты в режиме наблюдения: при изменении файлов тесты будут перезапускаться.

## Разработка встраиваемого приложения

При разработке приложения код следует располагать в папке `src`, а в папке `tests` - тесты.  

## Тестирование

При написании тестов `flow` может работать некорректно. Чтобы это исправить, необходимо выполнить команду:

```bash
$ flow-typed install jest@версия-jest-указанная-в-package.json
```

## Совместимость

Система сборки (`webpack@4`) и утилита преобразования `ES6` (`babel`) в `JavaScript` не подразумевают работу результата в `Internet Explorer 8`.

## Планы

- проверить работоспособность `Boilerplate`-а в ОС `Windows`
- написать решение для обновления пакетов через переустановку
